(function(){"use strict";var t={5518:function(t,e,o){var n=o(9242),a=o(3396);function s(t,e){const o=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(o)}var r=o(89);const l={},i=(0,r.Z)(l,[["render",s]]);var d=i,c=o(4301),u=o(678),p=o(7139);const m={class:"flex absolute inset-0 bg-[#13232fe6]"},g={class:"container mx-auto flex justify-center items-center"},h={class:"py-10 px-16 rounded-md bg-[#24333C] shadow-[5px_5px_10px_5px]"},x={class:"flex mb-5"},b=["onClick"];function w(t,e,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",g,[(0,a._)("form",h,[(0,a._)("ul",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.tabs,(t=>((0,a.wg)(),(0,a.iD)("li",{class:(0,p.C_)(["cursor-pointer p-[10px_60px] transition-[background-color] duration-300 hover:bg-[#1ab188] hover:text-white",[t.name===n.currentTab?"text-white bg-[#1ab188]":"bg-[#435359] text-slate-400"]]),key:t.text,onClick:e=>n.currentTab=t.name},(0,p.zw)(t.text),11,b)))),128))]),((0,a.wg)(),(0,a.j4)(a.Ob,null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(n.currentTab)))],1024))])])])}var f=o(4870);const k={class:"flex flex-col mb-6"},v=(0,a._)("label",{for:"emil",class:"text-white mb-[8px]"},"Email",-1),_={class:"text-red-500"},y=(0,a._)("label",{for:"username",class:"text-white mb-[8px]"},"username",-1),T=(0,a._)("label",{for:"password",class:"text-white mb-[8px]"},"password",-1),C={class:"text-red-500"},H={class:"text-green-300"};function S(t,e,o,s,r,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",k,[v,(0,a.wy)((0,a._)("input",{type:"text",id:"emil",class:"mb-[10px] pl-[8px]","onUpdate:modelValue":e[0]||(e[0]=t=>s.user.email=t)},null,512),[[n.nr,s.user.email]]),(0,a._)("span",_,(0,p.zw)(s.errMsg.email),1),y,(0,a.wy)((0,a._)("input",{type:"text",id:"username",class:"mb-[10px] pl-[8px]","onUpdate:modelValue":e[1]||(e[1]=t=>s.user.nickname=t)},null,512),[[n.nr,s.user.nickname]]),T,(0,a.wy)((0,a._)("input",{type:"password",id:"password",class:"mb-[10px] pl-[8px]","onUpdate:modelValue":e[2]||(e[2]=t=>s.user.password=t)},null,512),[[n.nr,s.user.password]]),(0,a._)("span",C,(0,p.zw)(s.errMsg.password),1)]),(0,a._)("button",{class:"w-full text-white p-[10px_60px] bg-[#1ab188]",onClick:e[3]||(e[3]=(0,n.iM)(((...t)=>s.submitHandler&&s.submitHandler(...t)),["prevent"]))},"註冊"),(0,a._)("span",H,(0,p.zw)(s.successMsg),1)],64)}o(6699);var D=o(6265),z=o.n(D),L={setup(){const t=(0,f.qj)({email:"",password:"",nickname:""}),e=(0,f.iH)(""),o=["密碼 字數太少，至少需要 6 個字","電子信箱 格式有誤","電子信箱 已被使用"],n=(0,f.qj)({password:"",email:""}),a=()=>{const a="https://todoo.5xcamp.us/users";z().post(a,{user:{email:t.email,nickname:t.nickname,password:t.password}}).then((t=>{n.password="",n.email="",e.value="註冊成功"})).catch((t=>{e.value="",n.password="",n.email="";let a=t.response.data.error.filter((t=>o.includes(t)));a.forEach((t=>{t.includes("密碼")&&(n.password=t),t.includes("電子信箱")&&(n.email=t)}))}))};return{user:t,successMsg:e,errMsg:n,submitHandler:a}}};const j=(0,r.Z)(L,[["render",S]]);var I=j;const O={class:"flex flex-col mb-3"},M=(0,a._)("label",{for:"emil",class:"text-white mb-[8px]"},"Email",-1),U=(0,a._)("span",{class:"text-red-500"},null,-1),V=(0,a._)("label",{for:"password",class:"text-white mb-[8px]"},"password",-1),$=(0,a._)("span",{class:"text-red-500"},null,-1),E={class:"inline-block mb-3"},Y=(0,a._)("span",{class:"text-white"},"保持登入",-1);function K(t,e,o,s,r,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",O,[M,(0,a.wy)((0,a._)("input",{type:"text",id:"emil",class:"mb-[10px] pl-[8px]","onUpdate:modelValue":e[0]||(e[0]=t=>s.user.email=t)},null,512),[[n.nr,s.user.email]]),U,V,(0,a.wy)((0,a._)("input",{type:"password",id:"password",class:"mb-[10px] pl-[8px]","onUpdate:modelValue":e[1]||(e[1]=t=>s.user.password=t)},null,512),[[n.nr,s.user.password]]),$]),(0,a._)("label",E,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"mr-2","onUpdate:modelValue":e[2]||(e[2]=t=>s.isKeepLogin=t)},null,512),[[n.e8,s.isKeepLogin]]),Y]),(0,a._)("button",{class:"w-full text-white p-[10px_60px] bg-[#1ab188]",onClick:e[3]||(e[3]=(0,n.iM)(((...t)=>s.submitHandler&&s.submitHandler(...t)),["prevent"]))},"登入"),(0,a._)("span",{class:(0,p.C_)(`text-${s.responseMsg.color}`)},(0,p.zw)(s.responseMsg.text),3)],64)}var F={setup(){const t=(0,f.qj)({email:"",password:""}),e=(0,f.qj)({text:"",color:""}),o=(0,u.tv)(),n=(0,f.iH)(!1),a=()=>{const a="https://todoo.5xcamp.us/users/sign_in";z().post(a,{user:{email:t.email,password:t.password}}).then((t=>{const a=new Date,s={year:a.getFullYear(),month:a.getMonth()+1,date:a.getDate(),hour:0,minutes:0,seconds:0},r=new Date(s.year,s.month-1,s.date+1,s.hour,s.minutes,s.seconds).getTime();e.text=t.data.message,e.color="green-300",!1===n.value&&sessionStorage.setItem("token",t.headers.authorization),!0!==n.value||localStorage.getItem("endTime")||(localStorage.setItem("endTime",String(r)),localStorage.setItem("token",t.headers.authorization)),o.push("/todolist")})).catch((t=>{e.text=t.response.data.message,e.color="red-500"}))};return{user:t,responseMsg:e,isKeepLogin:n,submitHandler:a}}};const A=(0,r.Z)(F,[["render",K]]);var q=A,Z={components:{Register:I,Login:q},setup(){const t=(0,f.qj)([{name:"register",text:"註冊"},{name:"login",text:"登入"}]),e=(0,f.iH)("login");return{tabs:t,currentTab:e}}};const B=(0,r.Z)(Z,[["render",w]]);var P=B,W=o.p+"img/load.00b4701f.gif";const N={class:"bg-[#13232fe6]"},Q={class:"container flex flex-col mx-auto pt-10"},R={class:"w-9/12 mx-auto pb-5"},G={class:"flex mb-8"},J={class:"flex items-center mb-5"},X=(0,a._)("span",{class:"mr-2 text-white"},"tag:",-1),tt=["onClick"],et={class:"flex mb-14 text-center text-white"},ot=["onClick"],nt={key:0,class:"text-white"},at=["onUpdate:modelValue","onChange"],st={class:"bg-[#1ab188] rounded-lg px-2 py-1"},rt=["onClick"],lt=["onClick"],it=["onClick"],dt={key:1,src:W,alt:"load",class:"m-auto w-12"};function ct(t,e,o,s,r,l){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("button",{class:"block ml-auto px-5 py-5 text-lg text-white bg-[#435359] hover:bg-[#1ab188]",onClick:e[0]||(e[0]=(...t)=>s.logOutHandler&&s.logOutHandler(...t))},"登出"),(0,a._)("div",Q,[(0,a._)("div",R,[(0,a._)("div",G,[(0,a.wy)((0,a._)("input",{type:"text",class:"flex-grow pl-2","onUpdate:modelValue":e[1]||(e[1]=t=>s.inputTodoContent=t),onKeyup:e[2]||(e[2]=(0,n.D2)(((...t)=>s.addTodoContentHandler&&s.addTodoContentHandler(...t)),["enter"]))},null,544),[[n.nr,s.inputTodoContent]]),(0,a._)("button",{class:"text-white bg-[#435359] px-5 py-3 hover:bg-[#1ab188]",onClick:e[3]||(e[3]=(...t)=>s.addTodoContentHandler&&s.addTodoContentHandler(...t))},"新增")]),(0,a._)("ul",J,[X,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.tagList,(t=>((0,a.wg)(),(0,a.iD)("li",{class:(0,p.C_)(["cursor-pointer mr-4 text-white hover:bg-[#1ab188]",[s.currentTag===t.text?"bg-[#1ab188]":"bg-[#435359]"]]),key:t,onClick:e=>s.currentTag=t.text},[(0,a.Wm)(i,{class:"inline-block p-2",to:`/todolist/${t.text}`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,p.zw)(t.text),1)])),_:2},1032,["to"])],10,tt)))),128))]),(0,a._)("ul",et,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.tabList,(t=>((0,a.wg)(),(0,a.iD)("li",{class:(0,p.C_)(["w-1/3 py-4 cursor-pointer hover:bg-[#1ab188]",[s.currentTab===t.title?"bg-[#1ab188]":"bg-[#435359]"]]),key:t.title,onClick:e=>s.tabChangeTodoHandler(t.title)},(0,p.zw)(t.text),11,ot)))),128))]),s.store.isLoad?((0,a.wg)(),(0,a.iD)("ul",nt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.todoList,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"flex items-center mb-6",key:t.id},[s.currentTodoId!==t.id?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"mr-2","onUpdate:modelValue":e=>t.checkStatus=e,onChange:e=>s.store.changeTodoCheckBox(t.id)},null,40,at),[[n.e8,t.checkStatus]]),(0,a._)("span",st,(0,p.zw)(t.content.tag),1),(0,a.Uk)(" "+(0,p.zw)(t.content.text),1)]),(0,a._)("button",{class:"ml-auto px-4 py-2 bg-[#435359] hover:bg-[#1ab188]",onClick:e=>s.modifyTodoHandler(t.id,t.content)},"修改",8,rt),(0,a._)("button",{class:"ml-4 px-4 py-2 bg-[#435359] hover:bg-[#1ab188]",onClick:e=>s.store.deleteTodo(t.id)},"刪除",8,lt)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.wy)((0,a._)("input",{type:"text",class:"flex-grow pl-2 text-black","onUpdate:modelValue":e[4]||(e[4]=t=>s.newTodoContent=t)},null,512),[[n.nr,s.newTodoContent]]),(0,a._)("button",{class:"ml-5 px-4 py-2 bg-[#435359] hover:bg-[#1ab188]",onClick:e=>s.updateTodoHandler(t.content.tag)},"更新",8,it),(0,a._)("button",{class:"ml-10 px-4 py-2 bg-[#435359] hover:bg-[#1ab188]",onClick:e[5]||(e[5]=t=>s.currentTodoId="")},"取消")],64))])))),128))])):((0,a.wg)(),(0,a.iD)("img",dt))])])])}const ut=(0,c.Q_)("todoList",{state:()=>({token:"",todo:[],isLoad:!1}),getters:{processCategory(){const t={all:t=>this.todo.filter((e=>e.content.tag===t)),done:t=>this.todo.filter((e=>null!==e.completed_at&&e.content.tag===t)),undone:t=>this.todo.filter((e=>null===e.completed_at&&e.content.tag===t))};return(e,o)=>t[e](o)}},actions:{setToken(t){this.token=t},resetStore(){this.$reset()},getTodo(){this.isLoad=!1,z().get("https://todoo.5xcamp.us/todos",{headers:{Authorization:this.token}}).then((t=>{t.data=t.data||{},t.data.todos=t.data.todos||[],this.todo=t.data.todos,this.setTodoContentFormat(),this.setCheckStatus(),this.isLoad=!0}))},setCheckStatus(){this.todo.forEach((t=>{t.completed_at?t.checkStatus=!0:t.checkStatus=!1}))},setTodoContentFormat(){this.todo.forEach((t=>{"string"===typeof t.content&&(t.content={text:t.content.split(",")[0],tag:t.content.split(",")[1]})}))},addTodo(t,e){return z().post("https://todoo.5xcamp.us/todos",{todo:{content:`${t},${e}`}},{headers:{Authorization:this.token}}).then((t=>{t.data=t.data||{},t.data.completed_at=null,this.todo.unshift(t.data),this.setTodoContentFormat()}))},updateTodo(t,e,o){return z().put(`https://todoo.5xcamp.us/todos/${e}`,{todo:{content:`${t.value},${o}`}},{headers:{Authorization:this.token}}).then((o=>{o.data=o.data||{},this.todo.forEach((o=>{o.id===e&&(o.content.text=t.value)})),this.setTodoContentFormat()}))},deleteTodo(t){z()["delete"](`https://todoo.5xcamp.us/todos/${t}`,{headers:{Authorization:this.token}}).then((()=>{this.todo=this.todo.filter((e=>e.id!==t))}))},changeTodoCheckBox(t){z().patch(`https://todoo.5xcamp.us/todos/${t}/toggle`,{toggleId:t},{headers:{Authorization:this.token}}).then((t=>{t.data=t.data||{},this.todo.forEach((e=>{e.id===t.data.id&&(e.completed_at=t.data.completed_at)}))}))}}});var pt={setup(){const t=(0,u.tv)(),e=((0,u.yj)(),ut()),o=[{title:"all",text:"全部"},{title:"done",text:"完成"},{title:"undone",text:"未完成"}],n=(0,f.iH)("all"),s=[{text:"work"},{text:"private"},{text:"family"}],r=(0,f.iH)("work"),l=(0,a.Fl)((()=>e.processCategory(n.value,r.value))),i=(0,f.iH)(""),d=(0,f.iH)(""),c=(0,f.iH)("");e.getTodo();const p=t=>{n.value=t},m=async()=>{""!==d.value&&(await e.addTodo(d.value,r.value),d.value="")},g=(t,e)=>{i.value=t,c.value=e.text},h=async t=>{""!==c.value&&(await e.updateTodo(c,i.value,t),i.value="")},x=()=>{const o="https://todoo.5xcamp.us/users/sign_out";z()["delete"](o,{headers:{Authorization:e.token}}).then((()=>{e.resetStore(),localStorage.clear(),sessionStorage.clear(),t.replace("/")}))};return{store:e,todoList:l,currentTodoId:i,tabList:o,currentTab:n,inputTodoContent:d,newTodoContent:c,tagList:s,currentTag:r,tabChangeTodoHandler:p,addTodoContentHandler:m,modifyTodoHandler:g,updateTodoHandler:h,logOutHandler:x}}};const mt=(0,r.Z)(pt,[["render",ct]]);var gt=mt;const ht=[{path:"/",name:"home",component:P},{path:"/todolist",name:"todolist",component:gt,children:[{path:":tag",component:gt}]},{path:"/:pathMatch(.*)*",redirect:{name:"home"}}],xt=(0,u.p7)({history:(0,u.r5)(),routes:ht});xt.beforeEach(((t,e,o)=>{const n=(new Date).getTime(),a=Number(localStorage.getItem("endTime")),s=ut(),r=t.matched[0].path,l={"/":()=>{localStorage.getItem("token")&&n<a?o({path:"/todolist"}):(localStorage.clear(),o())},"/todolist":()=>{if(sessionStorage.getItem("token"))return s.setToken(sessionStorage.getItem("token")),void o();localStorage.getItem("token")||o({path:"/"}),localStorage.getItem("token")&&(n<a?(s.setToken(localStorage.getItem("token")),o()):(localStorage.clear(),o({path:"/"})))}};l[r]()}));var bt=xt;(0,n.ri)(d).use(bt).use((0,c.WB)()).mount("#app")}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,n,a,s){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],a=t[c][1],s=t[c][2];for(var l=!0,i=0;i<n.length;i++)(!1&s||r>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[i])}))?n.splice(i--,1):(l=!1,s<r&&(r=s));if(l){t.splice(c--,1);var d=a();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,a,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/todolist-demo/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,s,r=n[0],l=n[1],i=n[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var c=i(o)}for(e&&e(n);d<r.length;d++)s=r[d],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},n=self["webpackChunktest"]=self["webpackChunktest"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(5518)}));n=o.O(n)})();
//# sourceMappingURL=app.d195b905.js.map